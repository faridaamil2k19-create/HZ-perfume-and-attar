<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Your Cart â€” HZ Perfume and Attar</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #0c0d16;
      color: #fff;
      padding: 28px;
    }
    .brand {
      font-family: 'Playfair Display';
      font-size: 22px;
      color: #a68aff;
      margin-bottom: 20px;
    }
    .cart-item {
      display: flex;
      align-items: center;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 10px;
      justify-content: space-between;
    }
    .cart-item img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 8px;
      margin-right: 12px;
    }
    .cart-details {
      flex: 1;
    }
    .price {
      color: #a68aff;
      font-weight: 600;
    }
    .remove-btn {
      background: none;
      border: 1px solid #a68aff;
      color: #a68aff;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
    }
    .summary {
      margin-top: 20px;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 16px;
    }
    .btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: linear-gradient(90deg,#a68aff,#5fd4ff);
      color: #000;
      font-weight: 800;
      cursor: pointer;
      margin-top: 16px;
    }
  </style>
</head>
<body>
  <div class="brand">ðŸ›’ Your Cart â€” HZ Perfume and Attar</div>
  <div id="cartContainer"></div>
  <div class="summary" id="summary"></div>

  <script>
    const CART_KEY = 'hz_cart_v1';
    function loadCart(){ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }
    function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); }

    function removeItem(id, size) {
      let cart = loadCart().filter(i => !(i.id === id && i.size === size));
      saveCart(cart);
      renderCart();
    }

    function renderCart() {
      const cart = loadCart();
      const container = document.getElementById('cartContainer');
      const summary = document.getElementById('summary');

      if(cart.length === 0) {
        container.innerHTML = `<p>Your cart is empty.</p>`;
        summary.innerHTML = '';
        return;
      }

      container.innerHTML = cart.map(item => `
        <div class="cart-item">
          <img src="${item.img}" alt="${item.name}">
          <div class="cart-details">
            <div><strong>${item.name}</strong> (${item.size}ml)</div>
            <div>Qty: ${item.qty}</div>
            <div class="price">PKR ${(item.price * item.qty).toLocaleString()}</div>
          </div>
          <button class="remove-btn" onclick="removeItem('${item.id}', ${item.size})">Remove</button>
        </div>
      `).join('');

      let subtotal = cart.reduce((sum, i) => sum + (i.price * i.qty), 0);
      let delivery = cart.length * 350;
      let total = subtotal + delivery;

      summary.innerHTML = `
        <h3>Order Summary</h3>
        <p>Subtotal: PKR ${subtotal.toLocaleString()}</p>
        <p>Delivery: PKR ${delivery.toLocaleString()}</p>
        <hr>
        <h3>Total: PKR ${total.toLocaleString()}</h3>
        <button class="btn" onclick="checkout()">Checkout</button>
      `;
    }

    function checkout(){
      window.location.href = 'buy.html?from=cart';
    }

    renderCart();
  </script>
</body>
</html>
